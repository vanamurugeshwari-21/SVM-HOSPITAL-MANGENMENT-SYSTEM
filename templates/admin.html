<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin Dashboard | SVM Hospital</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
 --p:#00ffff;--a:#4b0082;--bg:#0f0a1a;
 --c:#1a1433;--t:#f0f0ff;--l:#b0a8ff;
 --g:0 0 15px rgba(0,255,255,.6)
}
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins}
body{display:flex;color:var(--t);min-height:100vh;background:var(--bg)}

.sidebar{width:240px;background:var(--c);min-height:100vh}
.sidebar-header{text-align:center;padding:15px;border-bottom:1px solid var(--l)}
.sidebar-header img{width:80px}
.sidebar button{
 width:100%;padding:14px;border:0;background:none;
 color:var(--l);text-align:left;font-weight:600;cursor:pointer
}
.sidebar button.active,.sidebar button:hover{
 color:var(--p);background:rgba(0,255,255,.1)
}

.main{
 flex:1;padding:20px;
 background:linear-gradient(rgba(15,10,26,.85),rgba(15,10,26,.85)),
 url("https://images.unsplash.com/photo-1586773860418-d37222d8fce3") center/cover fixed
}
.tab{display:none}
.tab.active{display:block}

.cards{display:flex;gap:20px;flex-wrap:wrap;margin-top:15px}
.card{
 background:var(--c);padding:25px;border-radius:18px;
 min-width:220px;text-align:center;box-shadow:var(--g)
}
.card h3{color:var(--p)}

.doctors{display:flex;gap:20px;flex-wrap:wrap;margin-top:20px}
.doctor{
 background:var(--c);padding:20px;border-radius:20px;
 width:260px;text-align:center;box-shadow:var(--g)
}
.doctor img{
 width:140px;height:140px;border-radius:50%;
 border:3px solid var(--p);object-fit:cover
}

table{width:100%;border-collapse:collapse;margin-top:15px}
th,td{border:1px solid var(--l);padding:12px;text-align:center}
th{background:var(--a)}
table tr:nth-child(even){background:rgba(0,255,255,.05)}
table tr:hover{background:rgba(0,255,255,.1)}

.loading{text-align:center;color:var(--l);font-style:italic;padding:20px;}
.error{color:#ff6b6b;font-weight:600;text-align:center;padding:20px;}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
 <div class="sidebar-header">
  <img src="svm hospital logo.png">
  <h3>SVM Admin</h3>
  <p>Dashboard</p>
 </div>
 <button class="btn active" data-t="dash">Dashboard</button>
 <button class="btn" data-t="patients">Patients</button>
 <button class="btn" data-t="doc">Doctors</button>
 <button class="btn" data-t="app">Appointments</button>
 <button class="btn" data-t="about">Hospital Page</button>
</div>

<div class="main">

<!-- DASHBOARD -->
<div id="dash" class="tab active">
 <h2>Admin Dashboard</h2>
 <div class="cards">
  <div class="card"><h3>Total Patients</h3><p id="tp">Loading...</p></div>
  <div class="card"><h3>Total Doctors</h3><p id="td">Loading...</p></div>
  <div class="card"><h3>Total Appointments</h3><p id="ta">Loading...</p></div>
 </div>
</div>

<!-- PATIENTS -->
<div id="patients" class="tab">
 <h2>Registered Patients</h2>
 <div id="patientLoading" class="loading">Loading patients...</div>
 <table id="patientTable" style="display:none;">
  <tr>
   <th>No</th><th>Name</th><th>Email</th>
   <th>Gender</th><th>Age</th><th>Height</th><th>Weight</th>
  </tr>
  <tbody id="pl"></tbody>
 </table>
</div>

<!-- DOCTORS -->
<div id="doc" class="tab">
 <h2>Doctors List</h2>
 <div class="doctors" id="dc"></div>
</div>

<!-- APPOINTMENTS -->
<div id="app" class="tab">
 <h2>All Appointments</h2>
 <div id="appointmentLoading" class="loading">Loading appointments...</div>
 <table id="appointmentTable" style="display:none;">
  <tr>
   <th>No</th>
   <th>Patient</th>
   <th>Doctor</th>
   <th>Date</th>
   <th>Time</th>
  </tr>
  <tbody id="al"></tbody>
 </table>
</div>

<!-- ABOUT -->
<div id="about" class="tab">
 <h2>About SVM Hospital</h2>
 <div class="card" style="text-align:left;max-width:800px;margin:auto">
  <h3 style="color:#00ffff;text-align:center">üè• Welcome to SVM Hospital</h3>
  <p style="margin-top:15px">
   SVM Hospital is a leading healthcare center
   providing reliable, ethical, and compassionate medical services.
  </p>
  <p style="margin-top:8px">
   With advanced equipment, skilled doctors, and patient-friendly facilities,
   we ensure safe treatment and faster recovery.
  </p>
  <p style="margin-top:8px">
   Our focus is not only on curing illness but also on caring for patients
   with dignity and respect.
  </p>
 </div>

 <div class="cards" style="margin-top:25px">
  <div class="card"><h3>üè• Established</h3><p>1999</p></div>
  <div class="card"><h3>üë®‚Äç‚öïÔ∏è Doctors</h3><p>25+ Specialists</p></div>
  <div class="card"><h3>üõè Beds</h3><p>120+</p></div>
  <div class="card"><h3>üöë Emergency</h3><p>24√ó7 Available</p></div>
 </div>

 <div class="card" style="margin-top:25px">
  <h3 style="color:#00ffff">Why Choose SVM Hospital?</h3>
  <p style="margin-top:10px">
   ‚úî Experienced & caring doctors<br>
   ‚úî Advanced medical technology<br>
   ‚úî Clean & safe environment<br>
   ‚úî Transparent treatment process<br>
   ‚úî Affordable healthcare services
  </p>
 </div>
</div>

</div>

<script>
const API = "http://127.0.0.1:8000";

/* TAB SWITCH */
document.querySelectorAll(".btn").forEach(b=>{
 b.onclick=()=>{
  document.querySelectorAll(".btn").forEach(x=>x.classList.remove("active"));
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  b.classList.add("active");
  document.getElementById(b.dataset.t).classList.add("active");
 };
});

/* ELEMENTS */
const 
  tp = document.getElementById("tp"),
  td = document.getElementById("td"),
  ta = document.getElementById("ta"),
  pl = document.getElementById("pl"),
  dc = document.getElementById("dc"),
  al = document.getElementById("al");

/* DOCTORS (static) */
const doctors = [
 {name:"Dr. John Anderson",spec:"Cardiology",img:"img1.jpg"},
 {name:"Dr. Emma Wilson",spec:"Neurology",img:"img2.jpg"},
 {name:"Dr. Michael Roberts",spec:"Orthopedics",img:"img3.jpg"},
 {name:"Dr. Olivia Johnson",spec:"Dermatology",img:"img4.jpg"},
 {name:"Dr. William Smith",spec:"Pediatrics",img:"img5.jpg"},
 {name:"Dr. Sophia Brown",spec:"Gynecology",img:"img6.jpg"},
 {name:"Dr. James Davis",spec:"Oncology",img:"img7.jpg"},
 {name:"Dr. Isabella Martinez",spec:"Psychiatry",img:"img8.jpg"},
 {name:"Dr. Benjamin Lee",spec:"Radiology",img:"img9.jpg"},
 {name:"Dr. Mia Taylor",spec:"Gastroenterology",img:"img10.jpg"}
];

td.textContent = doctors.length;

dc.innerHTML = "";
doctors.forEach(d => {
 dc.innerHTML += `
 <div class="doctor">
  <img src="${d.img}">
  <h4>${d.name}</h4>
  <p>${d.spec}</p>
 </div>`;
});

/* PATIENTS */
async function loadPatients() {
 try {
  const res = await fetch(`${API}/patients`);
  const patients = await res.json();
  
  tp.textContent = patients.length;
  
  pl.innerHTML = "";
  if (patients.length === 0) {
   pl.innerHTML = '<tr><td colspan="7" class="loading">No patients registered yet</td></tr>';
  } else {
   patients.forEach((p, i) => {
    pl.innerHTML += `
    <tr>
     <td>${i+1}</td>
     <td>${p.name || '-'}</td>
     <td>${p.email || '-'}</td>
     <td>${p.gender || '-'}</td>
     <td>${p.age || '-'}</td>
     <td>${p.height ? p.height + ' cm' : '-'}</td>
     <td>${p.weight ? p.weight + ' kg' : '-'}</td>
    </tr>`;
   });
  }
  
  document.getElementById("patientTable").style.display = "table";
  document.getElementById("patientLoading").style.display = "none";
  
 } catch(e) {
  tp.textContent = "Error";
  document.getElementById("patientLoading").innerHTML = '<span class="error">Cannot load patients</span>';
 }
}

/* APPOINTMENTS ‚Äì IMPORTANT PART */
async function loadAppointments() {
 try {
  const res = await fetch(`${API}/appointments`);
  const appointments = await res.json();
  
  ta.textContent = appointments.length;
  
  al.innerHTML = "";
  if (appointments.length === 0) {
   al.innerHTML = '<tr><td colspan="5" class="loading">No appointments booked yet</td></tr>';
  } else {
   appointments.forEach((a, i) => {
    al.innerHTML += `
    <tr>
     <td>${i+1}</td>
     <td>${a.patient || a.patient_name || '-'}</td>
     <td>${a.doctor || a.doctor_name || '-'}</td>
     <td>${a.date || '-'}</td>
     <td>${a.time || '-'}</td>
    </tr>`;
   });
  }
  
  document.getElementById("appointmentTable").style.display = "table";
  document.getElementById("appointmentLoading").style.display = "none";
  
 } catch(e) {
  ta.textContent = "Error";
  document.getElementById("appointmentLoading").innerHTML = '<span class="error">Cannot load appointments</span>';
 }
}

/* LOAD EVERYTHING WHEN PAGE OPENS */
window.addEventListener('load', () => {
 loadPatients();
 loadAppointments();
});
</script>

</body>
</html>